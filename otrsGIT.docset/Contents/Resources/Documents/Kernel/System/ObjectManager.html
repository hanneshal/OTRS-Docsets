<html><head><title>Kernel::System::ObjectManager</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.28,
  using Pod::Simple::PullParser v3.28,
  under Perl v5.016002 at Mon Mar 24 08:30:00 2014 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#PUBLIC_INTERFACE'>PUBLIC INTERFACE</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Kernel::System::ObjectManager - object and dependency manager</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<pre>    use Kernel::System::ObjectManager;

    # it&#39;s important to store the object in this variable,
    # since many modules expect it that way.
    local $Kernel::OM = Kernel::System::ObjectManager-&#62;new(
        # options for module constructors here
        LogObject {
            LogPrefix =&#62; &#39;OTRS-MyTestScript&#39;,
        },
    );

    # now you can retrieve any configured object:

    unless ($Kernel::OM-&#62;Get(&#39;DBObject&#39;)-&#62;Prepare(&#39;SELECT 1&#39;)) {
        die &#34;Houston, we have a problem!&#34;;
    }</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PUBLIC_INTERFACE"
>PUBLIC INTERFACE</a></h1>

<dl>
<dt><a name="new()"
>new()</a></dt>

<dd>
<p>Creates a new instance of Kernel::System::ObjectManager.</p>

<pre>    use Kernel::System::ObjectManager;

    local $Kernel::OM = Kernel::System::ObjectManager-&#62;new(%Options)</pre>

<p>Options to this constructor should have object names as keys, and hash references as values. The hash reference will be flattened and passed to the constructor of the object with the same name as option key.</p>

<p>If the <code>Debug =&#62; 1</code> option is present, destruction of objects is checked, and a warning is emitted if objects persist after the attempt to destroy them.</p>

<dt><a name="Get()"
>Get()</a></dt>

<dd>
<p>Retrieves an object, and if it not yet exists, implicitly creating one for you. Note that objects must be configured before they can be retrieved. The standard objects are configured in <a href="../../Kernel/Config/Defaults.html" class="podlinkpod"
>Kernel::Config::Defaults</a>.</p>

<p>The name of an object is usually what the code base used so far, including the <code>Object</code> suffix. For example <code>-&#62;Get(&#39;TicketObject&#39;)</code> retrieves a <a href="../../Kernel/System/Ticket.html" class="podlinkpod"
>Kernel::System::Ticket</a> object.</p>

<pre>    my $ConfigObject = $Kernel::OM-&#62;Get(&#39;ConfigObject&#39;);</pre>

<dt><a name="ObjectConfigGet()"
>ObjectConfigGet()</a></dt>

<dd>
<p>Returns the configuration for a given object</p>

<pre>    my $Config = $Kernel::OM-&#62;ObjectConfigGet(
        Object  =&#62; &#39;TicketObject&#39;,      # Mandatory
    );</pre>

<dt><a name="ObjectRegister()"
>ObjectRegister()</a></dt>

<dd>
<p>Registers an object with the object manager.</p>

<pre>    $Kernel::OM-&#62;ObjectRegister(
        Name            =&#62; &#39;MyNewObject&#39;,       # Mandatory
        Dependencies    =&#62; [&#39;ConfigObject&#39;],    # Optional; falls back to default dependencies
        Object          =&#62; $TheNewObject,       # Optional
        Param           =&#62; {                    # Optional
            YourArgsHere    =&#62; 1,
        }
    );</pre>

<dt><a name="ObjectHash()"
>ObjectHash()</a></dt>

<dd>
<p>Returns a hash of all the already instantiated objects. The keys are the object names, and the values are the objects themselves.</p>

<p>This method is useful for creating objects of classes that are not aware of the object manager yet.</p>

<pre>    $SomeModule-&#62;new($Kernel::OM-&#62;ObjectHash());</pre>

<p>If the <code>Objects</code> parameter is present, it is interpreted as a list of object names that must be part of the returned hash.</p>

<pre>    $SomeModule-&#62;new(
        $Kernel::OM-&#62;ObjectHash(
            Objects =&#62; [&#39;TicketObject&#39;, &#39;DynamicFieldObject&#39;],
        ),
    );</pre>

<dt><a name="ObjectParamAdd()"
>ObjectParamAdd()</a></dt>

<dd>
<p>Adds arguments that will be passed to constructors of classes when they are created, in the same format as the <code>new()</code> method receives them.</p>

<pre>    $Kernel::OM-&#62;ObjectParamAdd(
        TicketObject =&#62; {
            Key =&#62; &#39;Value&#39;,
        },
    );</pre>

<dt><a name="ObjectsDiscard()"
>ObjectsDiscard()</a></dt>

<dd>
<p>Discards internally stored objects, so that the next access to objects creates them newly. If a list of object names is passed, only the supplied objects and their recursive dependencies are destroyed. If no list of object names is passed, all stored objects are detroyed.</p>

<pre>    $Kernel::OM-&#62;ObjectsDiscard();

    $Kernel::OM-&#62;ObjectsDiscard(
        Objects =&#62; [&#39;TicketObject&#39;, &#39;QueueObject&#39;],

    );</pre>

<p>Mostly used for tests that rely on fresh objects, or to avoid large memory consumption in long-running processes.</p>

<p>Note that if you pass a list of objects to be destroyed, they are destroyed in in the order they were passed; otherwise they are passed in reverse dependency order.</p>
</dd>
</dl>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
