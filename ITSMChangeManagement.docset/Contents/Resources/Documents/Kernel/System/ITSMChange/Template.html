<html><head><title>Kernel::System::ITSMChange::Template</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.28,
  using Pod::Simple::PullParser v3.28,
  under Perl v5.018004 at Tue Feb 16 20:51:27 2021 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#PUBLIC_INTERFACE'>PUBLIC INTERFACE</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new()'>new()</a>
    <li class='indexItem indexItem2'><a href='#TemplateAdd()'>TemplateAdd()</a>
    <li class='indexItem indexItem2'><a href='#TemplateUpdate()'>TemplateUpdate()</a>
    <li class='indexItem indexItem2'><a href='#TemplateGet()'>TemplateGet()</a>
    <li class='indexItem indexItem2'><a href='#TemplateList()'>TemplateList()</a>
    <li class='indexItem indexItem2'><a href='#TemplateSearch()'>TemplateSearch()</a>
    <li class='indexItem indexItem2'><a href='#TemplateDelete()'>TemplateDelete()</a>
    <li class='indexItem indexItem2'><a href='#TemplateTypeLookup()'>TemplateTypeLookup()</a>
    <li class='indexItem indexItem2'><a href='#TemplateSerialize()'>TemplateSerialize()</a>
    <li class='indexItem indexItem2'><a href='#TemplateDeSerialize()'>TemplateDeSerialize()</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#PRIVATE_INTERFACE'>PRIVATE INTERFACE</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#_CreateTemplateElements()'>_CreateTemplateElements()</a>
    <li class='indexItem indexItem2'><a href='#_CheckTemplateTypeIDs()'>_CheckTemplateTypeIDs()</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#TERMS_AND_CONDITIONS'>TERMS AND CONDITIONS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
><a name='//apple_ref/cpp/Class/NAME' class='dashAnchor'></a>NAME</a></h1>

<p>Kernel::System::ITSMChange::Template - template lib</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PUBLIC_INTERFACE"
><a name='//apple_ref/cpp/Class/PUBLIC INTERFACE' class='dashAnchor'></a>PUBLIC INTERFACE</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new()"
><a name='//apple_ref/cpp/Function/new()' class='dashAnchor'></a>new()</a></h2>

<p>Create an object.</p>

<pre>    use Kernel::System::ObjectManager;
    local $Kernel::OM = Kernel::System::ObjectManager-&#62;new();
    my $TemplateObject = $Kernel::OM-&#62;Get(&#39;Kernel::System::ITSMChange::Template&#39;);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="TemplateAdd()"
><a name='//apple_ref/cpp/Function/TemplateAdd()' class='dashAnchor'></a>TemplateAdd()</a></h2>

<p>Add a new template.</p>

<pre>    my $TemplateID = $TemplateObject-&#62;TemplateAdd(
        Name           =&#62; &#39;The template name&#39;,
        Content        =&#62; &#39;[{ ChangeAdd =&#62; { ... } }]&#39;,   # a serialized change, workorder, ...
        Comment        =&#62; &#39;A comment&#39;,                    # (optional)
        TemplateType   =&#62; &#39;ITSMChange&#39;,                   # alternatively: TemplateTypeID
        TemplateTypeID =&#62; 1,                              # alternatively: TemplateType
        ValidID        =&#62; 1,
        UserID         =&#62; 1,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="TemplateUpdate()"
><a name='//apple_ref/cpp/Function/TemplateUpdate()' class='dashAnchor'></a>TemplateUpdate()</a></h2>

<p>Update a template.</p>

<pre>    my $Success = $TemplateObject-&#62;TemplateUpdate(
        TemplateID =&#62; 1234,
        Name       =&#62; &#39;The template name&#39;,          # (optional)
        Comment    =&#62; &#39;A comment&#39;,                  # (optional)
        Content  =&#62; &#39;[{ ChangeAdd =&#62; { ... } }]&#39;,   # (optional) a serialized change, workorder, ...
        ValidID    =&#62; 1,                            # (optional)
        TypeID     =&#62; 1,                            # (optional)
        UserID     =&#62; 1,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="TemplateGet()"
><a name='//apple_ref/cpp/Function/TemplateGet()' class='dashAnchor'></a>TemplateGet()</a></h2>

<p>Returns a hash reference of the template data for a given TemplateID.</p>

<pre>    my $TemplateData = $TemplateObject-&#62;TemplateGet(
        TemplateID =&#62; 123,
        UserID      =&#62; 1,
    );</pre>

<p>The returned hash reference contains following elements:</p>

<pre>    $TemplateData{TemplateID}
    $TemplateData{Name}
    $TemplateData{Comment}
    $TemplateData{Content}
    $TemplateData{TypeID}
    $TemplateData{Type}
    $TemplateData{ValidID}
    $TemplateData{CreateTime}
    $TemplateData{CreateBy}
    $TemplateData{ChangeTime}
    $TemplateData{ChangeBy}</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="TemplateList()"
><a name='//apple_ref/cpp/Function/TemplateList()' class='dashAnchor'></a>TemplateList()</a></h2>

<p>return a hashref of all templates</p>

<pre>    my $Templates = $TemplateObject-&#62;TemplateList(
        Valid          =&#62; 0,             # (optional) default 1 (0|1)
        CommentLength  =&#62; 15,            # (optional) default 0
        TemplateType   =&#62; &#39;ITSMChange&#39;   # (optional) or TemplateType
        TemplateTypeID =&#62; 1,             # (optional) or TemplateTypeID
        UserID         =&#62; 1,
    );</pre>

<p>returns</p>

<pre>    $Templates = {
        1 =&#62; &#39;my template&#39;,
        3 =&#62; &#39;your template name&#39;,
    };</pre>

<p>If parameter <code>CommentLength</code> is passed, an excerpt (of the passed length) of the comment is appended to the template name. If the parameter <code>TemplateType</code> or <code>TemplateTypeID</code> is passed, then the list of templates is restricted to the given type.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="TemplateSearch()"
><a name='//apple_ref/cpp/Function/TemplateSearch()' class='dashAnchor'></a>TemplateSearch()</a></h2>

<p>Returns either a list, as an arrayref, or a count of found template ids. The count of results is returned when the parameter <code>Result =</code> &#39;COUNT&#39;&#62; is passed.</p>

<p>The search criteria are logically AND connected. When a list is passed as <code>criterium</code>, the individual members are OR connected. When an undef or a reference to an empty array is passed, then the search <code>criterium</code> is ignored.</p>

<pre>    my $TemplateIDsRef = $TemplateObject-&#62;TemplateSearch(

        Name              =&#62; &#39;Sample template&#39;,                        # (optional)
        Comment           =&#62; &#39;just an example&#39;,                        # (optional)

        TemplateTypeIDs   =&#62; [ 11, 12 ],                               # (optional)
        TemplateTypes     =&#62; [ &#39;ITSMChange&#39;, &#39;CAB&#39; ],                  # (optional)

        CreateBy          =&#62; [ 5, 2, 3 ],                              # (optional)
        ChangeBy          =&#62; [ 3, 2, 1 ],                              # (optional)

        # templates with created time after ...
        CreateTimeNewerDate       =&#62; &#39;2006-01-09 00:00:01&#39;,            # (optional)
        # templates with created time before then ....
        CreateTimeOlderDate       =&#62; &#39;2006-01-19 23:59:59&#39;,            # (optional)

        # templates with changed time after ...
        ChangeTimeNewerDate       =&#62; &#39;2006-01-09 00:00:01&#39;,            # (optional)
        # templates with changed time before then ....
        ChangeTimeOlderDate       =&#62; &#39;2006-01-19 23:59:59&#39;,            # (optional)

        OrderBy =&#62; [ &#39;TemplateID&#39;, &#39;Name&#39; ],                           # (optional)
        # ignored when the result type is &#39;COUNT&#39;
        # default: [ &#39;TemplateID&#39; ],
        # (TemplateID, Name, Comment, TemplateTypeID,
        # CreateTime, CreateBy, ChangeTime, ChangeBy)

        # Additional information for OrderBy:
        # The OrderByDirection can be specified for each OrderBy attribute.
        # The pairing is made by the array indices.

        OrderByDirection =&#62; [ &#39;Down&#39;, &#39;Up&#39; ],                          # (optional)
        # ignored when the result type is &#39;COUNT&#39;
        # default: [ &#39;Down&#39; ]
        # (Down | Up)

        UsingWildcards =&#62; 1,                                           # (optional)
        # (0 | 1) default 1

        Result =&#62; &#39;ARRAY&#39; || &#39;COUNT&#39;,                                  # (optional)
        # default: ARRAY, returns an array of template ids
        # COUNT returns a scalar with the number of found templates

        Limit =&#62; 100,                                                  # (optional)
        # ignored when the result type is &#39;COUNT&#39;

        UserID =&#62; 1,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="TemplateDelete()"
><a name='//apple_ref/cpp/Function/TemplateDelete()' class='dashAnchor'></a>TemplateDelete()</a></h2>

<p>Delete a template.</p>

<pre>    my $Success = $TemplateObject-&#62;TemplateDelete(
        TemplateID =&#62; 123,
        UserID      =&#62; 1,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="TemplateTypeLookup()"
><a name='//apple_ref/cpp/Function/TemplateTypeLookup()' class='dashAnchor'></a>TemplateTypeLookup()</a></h2>

<p>Return the template type id when the template type name is passed. Return the template type name when the template type id is passed. When no template type id or template type name is found, then the undefined value is returned.</p>

<pre>    my $TypeID = $TemplateObject-&#62;TemplateTypeLookup(
        TemplateType =&#62; &#39;my template type name&#39;,
    );

    my $TxpeName = $TemplateObject-&#62;TemplateTypeLookup(
        TemplateTypeID =&#62; 42,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="TemplateSerialize()"
><a name='//apple_ref/cpp/Function/TemplateSerialize()' class='dashAnchor'></a>TemplateSerialize()</a></h2>

<p>This method is in fact a dispatcher for different template types. Currently ITSMChangeManagement supports these template types:</p>

<p>ITSMChange ITSMWorkOrder CAB ITSMCondition</p>

<p>The method returns a data structure, serialized with Data::Dumper.</p>

<pre>    my $ChangeTemplate = $TemplateObject-&#62;TemplateSerialize(
        TemplateType =&#62; &#39;ITSMChange&#39;,
        StateReset   =&#62; 1, # (optional) reset to default state
        UserID       =&#62; 1,

        # other options needed depending on the template type
        ChangeID =&#62; 123,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="TemplateDeSerialize()"
><a name='//apple_ref/cpp/Function/TemplateDeSerialize()' class='dashAnchor'></a>TemplateDeSerialize()</a></h2>

<p>This method deserializes the template content. It returns the ID of the &#34;main&#34; element that was created based on the template.</p>

<pre>    my $ElementID = $TemplateObject-&#62;TemplateDeSerialize(
        TemplateID =&#62; 123,
        UserID     =&#62; 1,
    );</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVATE_INTERFACE"
><a name='//apple_ref/cpp/Class/PRIVATE INTERFACE' class='dashAnchor'></a>PRIVATE INTERFACE</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="_CreateTemplateElements()"
><a name='//apple_ref/cpp/Function/_CreateTemplateElements()' class='dashAnchor'></a>_CreateTemplateElements()</a></h2>

<p>This method dispatches the elements creation. It calls the subroutine that belongs to the given type (e.g. ChangeAdd). After that it invokes itself for all the children of the main element.</p>

<p>This method returns the ID of the main element.</p>

<pre>    my $ElementID = $TemplateObject-&#62;_CreateTemplateElements(
        Template =&#62; {
            ChangeAdd =&#62; { ... },
            Children  =&#62; [
                {
                    WorkOrderAdd =&#62; { ... },
                    Children     =&#62; [ ... ],
                },
                {
                    WorkOrderAdd =&#62; { ... },
                    Children     =&#62; [ ... ],
                },
            ],
        },

        # any other parameters can follow
    )</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="_CheckTemplateTypeIDs()"
><a name='//apple_ref/cpp/Function/_CheckTemplateTypeIDs()' class='dashAnchor'></a>_CheckTemplateTypeIDs()</a></h2>

<p>check whether the given template type ids are all valid</p>

<pre>    my $Ok = $TemplateObject-&#62;_CheckTemplateTypeIDs(
        TemplateTypeIDs =&#62; [ 2, 500 ],
        UserID          =&#62; 1,
    );</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="TERMS_AND_CONDITIONS"
><a name='//apple_ref/cpp/Class/TERMS AND CONDITIONS' class='dashAnchor'></a>TERMS AND CONDITIONS</a></h1>

<p>This software is part of the OTRS project (<a href="https://otrs.org/" class="podlinkurl"
>https://otrs.org/</a>).</p>

<p>This software comes with ABSOLUTELY NO WARRANTY. For details, see the enclosed file COPYING for license information (GPL). If you did not receive this file, see <a href="https://www.gnu.org/licenses/gpl-3.0.txt" class="podlinkurl"
>https://www.gnu.org/licenses/gpl-3.0.txt</a>.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
