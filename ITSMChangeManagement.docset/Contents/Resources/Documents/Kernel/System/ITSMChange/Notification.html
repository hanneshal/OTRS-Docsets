<html><head><title>Kernel::System::ITSMChange::Notification</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.28,
  using Pod::Simple::PullParser v3.28,
  under Perl v5.018004 at Tue Feb 16 20:51:27 2021 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#PUBLIC_INTERFACE'>PUBLIC INTERFACE</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new()'>new()</a>
    <li class='indexItem indexItem2'><a href='#NotificationSend()'>NotificationSend()</a>
    <li class='indexItem indexItem2'><a href='#NotificationRuleGet()'>NotificationRuleGet()</a>
    <li class='indexItem indexItem2'><a href='#NotificationRuleAdd()'>NotificationRuleAdd()</a>
    <li class='indexItem indexItem2'><a href='#NotificationRuleUpdate()'>NotificationRuleUpdate()</a>
    <li class='indexItem indexItem2'><a href='#NotificationRuleDelete()'>NotificationRuleDelete()</a>
    <li class='indexItem indexItem2'><a href='#NotificationRuleList()'>NotificationRuleList()</a>
    <li class='indexItem indexItem2'><a href='#NotificationRuleSearch()'>NotificationRuleSearch()</a>
    <li class='indexItem indexItem2'><a href='#RecipientLookup()'>RecipientLookup()</a>
    <li class='indexItem indexItem2'><a href='#RecipientList()'>RecipientList()</a>
    <li class='indexItem indexItem2'><a href='#The_following_placeholders_can_be_used_in_Change%3A%3Axxx_notifications'>The following placeholders can be used in Change::xxx notifications</a>
    <ul   class='indexList indexList3'>
      <li class='indexItem indexItem3'><a href='#OTRS_CHANGE_xxx'>OTRS_CHANGE_xxx</a>
      <li class='indexItem indexItem3'><a href='#OTRS_CHANGEBUILDER_xxx%2C_OTRS_CHANGEMANAGER_xxx%2C_OTRS_WORKORDERAGENT_xxx'>OTRS_CHANGEBUILDER_xxx, OTRS_CHANGEMANAGER_xxx, OTRS_WORKORDERAGENT_xxx</a>
      <li class='indexItem indexItem3'><a href='#OTRS_WORKORDER_xxx'>OTRS_WORKORDER_xxx</a>
      <li class='indexItem indexItem3'><a href='#OTRS_LINK_xxx'>OTRS_LINK_xxx</a>
    </ul>
  </ul>
  <li class='indexItem indexItem1'><a href='#TERMS_AND_CONDITIONS'>TERMS AND CONDITIONS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
><a name='//apple_ref/cpp/Class/NAME' class='dashAnchor'></a>NAME</a></h1>

<p>Kernel::System::ITSMChange::Notification - notification functions for change management</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
><a name='//apple_ref/cpp/Class/DESCRIPTION' class='dashAnchor'></a>DESCRIPTION</a></h1>

<p>This module is managing notifications.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PUBLIC_INTERFACE"
><a name='//apple_ref/cpp/Class/PUBLIC INTERFACE' class='dashAnchor'></a>PUBLIC INTERFACE</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new()"
><a name='//apple_ref/cpp/Function/new()' class='dashAnchor'></a>new()</a></h2>

<p>Create a notification object.</p>

<pre>    use Kernel::System::ObjectManager;
    local $Kernel::OM = Kernel::System::ObjectManager-&#62;new();
    my $NotificationObject = $Kernel::OM-&#62;Get(&#39;Kernel::System::ITSMChange::Notification&#39;);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="NotificationSend()"
><a name='//apple_ref/cpp/Function/NotificationSend()' class='dashAnchor'></a>NotificationSend()</a></h2>

<p>Send the notification to customers and/or agents.</p>

<pre>    my $Success = $NotificationObject-&#62;NotificationSend(
        AgentIDs    =&#62; [ 1, 2, 3, ]
        CustomerIDs =&#62; [ 1, 2, 3, ],
        Type        =&#62; &#39;Change&#39;,          # Change|WorkOrder
        Event       =&#62; &#39;ChangeUpdate&#39;,
        Data        =&#62; { %ChangeData },   # Change|WorkOrder|Link data
        Message =&#62; {
            Agent =&#62; {
                &#39;en&#39; =&#62; {
                    Subject     =&#62; &#39;Hello Agent&#39;,
                    Body        =&#62; &#39;Hello World&#39;,
                    ContentType =&#62; &#39;text/plain&#39;,
                },
                &#39;de&#39; =&#62; {
                    Subject     =&#62; &#39;Hallo Agent&#39;,
                    Body        =&#62; &#39;Hallo Welt&#39;,
                    ContentType =&#62; &#39;text/plain&#39;,
                },
            },
            Customer =&#62; {
                &#39;en&#39; =&#62; {
                    Subject     =&#62; &#39;Hello Customer&#39;,
                    Body        =&#62; &#39;Hello World&#39;,
                    ContentType =&#62; &#39;text/plain&#39;,
                },
                &#39;de&#39; =&#62; {
                    Subject     =&#62; &#39;Hallo Kunde&#39;,
                    Body        =&#62; &#39;Hallo Welt&#39;,
                    ContentType =&#62; &#39;text/plain&#39;,
                },
            },
        },
        UserID =&#62; 123,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="NotificationRuleGet()"
><a name='//apple_ref/cpp/Function/NotificationRuleGet()' class='dashAnchor'></a>NotificationRuleGet()</a></h2>

<p>Get info about a single notification rule</p>

<pre>    my $NotificationRule = $NotificationObject-&#62;NotificationRuleGet(
        ID =&#62; 123,
    );</pre>

<p>returns</p>

<pre>    {
        ID           =&#62; 123,
        Name         =&#62; &#39;a descriptive name&#39;,
        Attribute    =&#62; &#39;ChangeTitle&#39;,
        EventID      =&#62; 1,
        Event        =&#62; &#39;ChangeUpdate&#39;,
        ValidID      =&#62; 1,
        Comment      =&#62; &#39;description what the rule does&#39;,
        Rule         =&#62; &#39;rejected&#39;,
        Recipients   =&#62; [ &#39;ChangeBuilder&#39;, &#39;ChangeManager&#39;, &#39;ChangeCABCustomers&#39; ],
        RecipientIDs =&#62; [ 2, 3, 7 ],
        Message =&#62; {
            Agent =&#62; {
                &#39;en&#39; =&#62; {
                    Subject     =&#62; &#39;Hello Agent&#39;,
                    Body        =&#62; &#39;Hello World&#39;,
                    ContentType =&#62; &#39;text/plain&#39;,
                },
                &#39;de&#39; =&#62; {
                    Subject     =&#62; &#39;Hallo Agent&#39;,
                    Body        =&#62; &#39;Hallo Welt&#39;,
                    ContentType =&#62; &#39;text/plain&#39;,
                },
            },
            Customer =&#62; {
                &#39;en&#39; =&#62; {
                    Subject     =&#62; &#39;Hello Customer&#39;,
                    Body        =&#62; &#39;Hello World&#39;,
                    ContentType =&#62; &#39;text/plain&#39;,
                },
                &#39;de&#39; =&#62; {
                    Subject     =&#62; &#39;Hallo Kunde&#39;,
                    Body        =&#62; &#39;Hallo Welt&#39;,
                    ContentType =&#62; &#39;text/plain&#39;,
                },
            },
        },
    }</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="NotificationRuleAdd()"
><a name='//apple_ref/cpp/Function/NotificationRuleAdd()' class='dashAnchor'></a>NotificationRuleAdd()</a></h2>

<p>Add a notification rule. Returns the ID of the rule.</p>

<pre>    my $ID = $NotificationObject-&#62;NotificationRuleAdd(
        Name         =&#62; &#39;a descriptive name&#39;,
        Attribute    =&#62; &#39;ChangeTitle&#39;,
        EventID      =&#62; 1,
        ValidID      =&#62; 1,
        Comment      =&#62; &#39;description what the rule does&#39;,
        Rule         =&#62; &#39;rejected&#39;,
        RecipientIDs =&#62; [ 2, 3, 7 ],
        Message =&#62; {
            Agent =&#62; {
                &#39;en&#39; =&#62; {
                    Subject     =&#62; &#39;Hello Agent&#39;,
                    Body        =&#62; &#39;Hello World&#39;,
                    ContentType =&#62; &#39;text/plain&#39;,
                },
                &#39;de&#39; =&#62; {
                    Subject     =&#62; &#39;Hallo Agent&#39;,
                    Body        =&#62; &#39;Hallo Welt&#39;,
                    ContentType =&#62; &#39;text/plain&#39;,
                },
            },
            Customer =&#62; {
                &#39;en&#39; =&#62; {
                    Subject     =&#62; &#39;Hello Customer&#39;,
                    Body        =&#62; &#39;Hello World&#39;,
                    ContentType =&#62; &#39;text/plain&#39;,
                },
                &#39;de&#39; =&#62; {
                    Subject     =&#62; &#39;Hallo Kunde&#39;,
                    Body        =&#62; &#39;Hallo Welt&#39;,
                    ContentType =&#62; &#39;text/plain&#39;,
                },
            },
        },
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="NotificationRuleUpdate()"
><a name='//apple_ref/cpp/Function/NotificationRuleUpdate()' class='dashAnchor'></a>NotificationRuleUpdate()</a></h2>

<p>Updates an existing notification rule.</p>

<pre>    my $Success = $NotificationObject-&#62;NotificationRuleUpdate(
        ID           =&#62; 123,
        Name         =&#62; &#39;a descriptive name&#39;,
        Attribute    =&#62; &#39;ChangeTitle&#39;,
        EventID      =&#62; 1,
        ValidID      =&#62; 1,
        Comment      =&#62; &#39;description what the rule does&#39;,
        Rule         =&#62; &#39;rejected&#39;,
        RecipientIDs =&#62; [ 2, 3, 7 ],
        Message =&#62; {
            Agent =&#62; {
                &#39;en&#39; =&#62; {
                    Subject     =&#62; &#39;Hello Agent&#39;,
                    Body        =&#62; &#39;Hello World&#39;,
                    ContentType =&#62; &#39;text/plain&#39;,
                },
                &#39;de&#39; =&#62; {
                    Subject     =&#62; &#39;Hallo Agent&#39;,
                    Body        =&#62; &#39;Hallo Welt&#39;,
                    ContentType =&#62; &#39;text/plain&#39;,
                },
            },
            Customer =&#62; {
                &#39;en&#39; =&#62; {
                    Subject     =&#62; &#39;Hello Customer&#39;,
                    Body        =&#62; &#39;Hello World&#39;,
                    ContentType =&#62; &#39;text/plain&#39;,
                },
                &#39;de&#39; =&#62; {
                    Subject     =&#62; &#39;Hallo Kunde&#39;,
                    Body        =&#62; &#39;Hallo Welt&#39;,
                    ContentType =&#62; &#39;text/plain&#39;,
                },
            },
        },
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="NotificationRuleDelete()"
><a name='//apple_ref/cpp/Function/NotificationRuleDelete()' class='dashAnchor'></a>NotificationRuleDelete()</a></h2>

<p>deletes an existing notification rule</p>

<pre>    my $Success = $NotificationObject-&#62;NotificationRuleDelete(
        ID =&#62; 123,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="NotificationRuleList()"
><a name='//apple_ref/cpp/Function/NotificationRuleList()' class='dashAnchor'></a>NotificationRuleList()</a></h2>

<p>returns an array reference with IDs of all existing notification rules</p>

<pre>    my $List = $NotificationObject-&#62;NotificationRuleList();</pre>

<p>returns</p>

<pre>    [ 1, 2, 3 ]</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="NotificationRuleSearch()"
><a name='//apple_ref/cpp/Function/NotificationRuleSearch()' class='dashAnchor'></a>NotificationRuleSearch()</a></h2>

<p>Returns an array reference with IDs of all matching notification rules. The only valid search parameter is the EventID.</p>

<pre>    my $NotificationRuleIDs = $NotificationObject-&#62;NotificationRuleSearch(
        EventID =&#62; 4,    # optional, primary key in change_history_type
        Valid   =&#62; 1,    # optional, default is 1
    );</pre>

<p>returns</p>

<pre>    [ 1, 2, 3 ]</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="RecipientLookup()"
><a name='//apple_ref/cpp/Function/RecipientLookup()' class='dashAnchor'></a>RecipientLookup()</a></h2>

<p>Returns the ID when you pass the recipient name and returns the name if you pass the recipient ID.</p>

<pre>    my $ID = $NotificationObject-&#62;RecipientLookup(
        Name =&#62; &#39;ChangeBuilder&#39;,
    );

    my $Name = $NotificationObject-&#62;RecipientLookup(
        ID =&#62; 123,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="RecipientList()"
><a name='//apple_ref/cpp/Function/RecipientList()' class='dashAnchor'></a>RecipientList()</a></h2>

<p>Returns an array reference with hash references. The key of the hash reference is the id of an recipient and the human readable and translatable name is the value.</p>

<pre>    my $List = $NotificationObject-&#62;RecipientList();</pre>

<p>returns</p>

<pre>    [
        {
            Key   =&#62; 1,
            Value =&#62; &#39;Change Builder&#39;,
        },
        {
            Key   =&#62; 2,
            Value =&#62; &#39;Change Manager&#39;,
        },
    ]</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="The_following_placeholders_can_be_used_in_Change::xxx_notifications"
><a name='//apple_ref/cpp/Function/The following placeholders can be used in Change::xxx notifications' class='dashAnchor'></a>The following placeholders can be used in Change::xxx notifications</a></h2>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="OTRS_CHANGE_xxx"
><code>OTRS_CHANGE_xxx</code></a></h3>

<p>with the subsequent values for xxx:</p>

<pre>    ChangeID
        The ID of the change
    ChangeNumber
        The number of the change
    ChangeStateID
        The ID of the change state
    ChangeState
        The name of the change state (e.g. requested, approved)
    ChangeStateSignal
    ChangeTitle
        The change title
    Description
        The &#34;original&#34; description. Please note: If richtext feature is enabled,
        this contains HTML markup. So this can be used to send HTML notifications.
    DescriptionPlain
        This is the plain description without any HTML markup. This is better for plain notifications.
    Justification
        The same as for Description applies here.
    JustificationPlain
        See DescriptionPlain.
    ChangeBuilderID
        Change builder ID
    ChangeManagerID
        Change manager ID
    CategoryID
        ID of changes&#39; category.
    Category
        Name of changes&#39; category.
    ImpactID
        ID of changes&#39; impact.
    Impact
        Name of changes&#39; impact.
    PriorityID
        ID of changes&#39; priority.
    Priority
        Name of changes&#39; priority.
    WorkOrderCount
        Number of all work orders that belong to the change.
    RequestedTime
        The time the customer want the change to be finished.
    PlannedEffort
        Sum of the planned efforts (calculated from the workorders).
    AccountedTime
        Accounted time of the change (calculated from the workorders).
    PlannedStartTime
        Planned start time of the change (calculated from the workorders).
    PlannedEndTime
        Planned end time of the change (calculated from the workorders).
    ActualStartTime
        Actual start time of the change (calculated from the workorders).
    ActualEndTime
        Actual end time of the change (calculated from the workorders).</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="OTRS_CHANGEBUILDER_xxx,_OTRS_CHANGEMANAGER_xxx,_OTRS_WORKORDERAGENT_xxx"
><code>OTRS_CHANGEBUILDER_xxx</code>, <code>OTRS_CHANGEMANAGER_xxx</code>, <code>OTRS_WORKORDERAGENT_xxx</code></a></h3>

<p>with the subsequent values for xxx:</p>

<pre>    UserFirstname
        Firstname of the person.
    UserLastname
        Lastname of the person.
    UserEmail
        Email address of the person.</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="OTRS_WORKORDER_xxx"
><code>OTRS_WORKORDER_xxx</code></a></h3>

<p>with the subsequent values for xxx:</p>

<pre>    WorkOrderID
        ID of the workorder
    ChangeID
        ID of the change the workorder belongs to.
    WorkOrderNumber
        Workorder number
    WorkOrderTitle
        Title of the workorder
    Instruction
        See Change placeholders -&#62; Description
    InstructionPlain
        See Change placeholders -&#62; DescriptionPlain
    Report
        See Change placeholders -&#62; Description
    ReportPlain
        See Change placeholders -&#62; DescriptionPlain
    WorkOrderStateID
        ID of the workorder state.
    WorkOrderState
        Name of the workorder state.
    WorkOrderStateSignal
    WorkOrderTypeID
        ID of the workorder type.
    WorkOrderType
        The name of the work order type.
    WorkOrderAgentID
        The ID of the workorder agent.
    PlannedStartTime
        The planned start time for the workorder.
    PlannedEndTime
        The planned end time for the workorder.
    ActualStartTime
        When did the workorder actually start.
    ActualEndTime
        When did the workorder actually end.
    AccountedTime
        The so far accounted time for the single workorder
    PlannedEffort
        This is the effort planned for the single workorder.</pre>

<h3><a class='u' href='#___top' title='click to go to top of document'
name="OTRS_LINK_xxx"
><code>OTRS_LINK_xxx</code></a></h3>

<p>with the subsequent values for xxx:</p>

<pre>    Object
        other object of the link
    SourceObject
        other object of the link, when the other object is the source
    TargetObject
        other object of the link, when the other object ist the target
    State
        State of the link
    Type
        Type of the link</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="TERMS_AND_CONDITIONS"
><a name='//apple_ref/cpp/Class/TERMS AND CONDITIONS' class='dashAnchor'></a>TERMS AND CONDITIONS</a></h1>

<p>This software is part of the OTRS project (<a href="https://otrs.org/" class="podlinkurl"
>https://otrs.org/</a>).</p>

<p>This software comes with ABSOLUTELY NO WARRANTY. For details, see the enclosed file COPYING for license information (GPL). If you did not receive this file, see <a href="https://www.gnu.org/licenses/gpl-3.0.txt" class="podlinkurl"
>https://www.gnu.org/licenses/gpl-3.0.txt</a>.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
