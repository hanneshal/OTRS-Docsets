<html><head><title>Kernel::System::ITSMChange::ITSMCondition</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.28,
  using Pod::Simple::PullParser v3.28,
  under Perl v5.018004 at Tue Feb 16 20:51:27 2021 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#PUBLIC_INTERFACE'>PUBLIC INTERFACE</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new()'>new()</a>
    <li class='indexItem indexItem2'><a href='#ConditionAdd()'>ConditionAdd()</a>
    <li class='indexItem indexItem2'><a href='#ConditionUpdate()'>ConditionUpdate()</a>
    <li class='indexItem indexItem2'><a href='#ConditionLookup()'>ConditionLookup()</a>
    <li class='indexItem indexItem2'><a href='#ConditionGet()'>ConditionGet()</a>
    <li class='indexItem indexItem2'><a href='#ConditionList()'>ConditionList()</a>
    <li class='indexItem indexItem2'><a href='#ConditionDelete()'>ConditionDelete()</a>
    <li class='indexItem indexItem2'><a href='#ConditionDeleteAll()'>ConditionDeleteAll()</a>
    <li class='indexItem indexItem2'><a href='#ConditionMatchExecuteAll()'>ConditionMatchExecuteAll()</a>
    <li class='indexItem indexItem2'><a href='#ConditionMatchExecute()'>ConditionMatchExecute()</a>
    <li class='indexItem indexItem2'><a href='#ConditionMatchStateLock()'>ConditionMatchStateLock()</a>
    <li class='indexItem indexItem2'><a href='#ConditionCompareValueFieldType()'>ConditionCompareValueFieldType()</a>
    <li class='indexItem indexItem2'><a href='#ConditionListByObjectType()'>ConditionListByObjectType()</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#PRIVATE_INTERFACE'>PRIVATE INTERFACE</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#_ConditionMatch()'>_ConditionMatch()</a>
    <li class='indexItem indexItem2'><a href='#_ConditionListByObject()'>_ConditionListByObject()</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#TERMS_AND_CONDITIONS'>TERMS AND CONDITIONS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
><a name='//apple_ref/cpp/Class/NAME' class='dashAnchor'></a>NAME</a></h1>

<p>Kernel::System::ITSMChange::ITSMCondition - condition lib</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
><a name='//apple_ref/cpp/Class/DESCRIPTION' class='dashAnchor'></a>DESCRIPTION</a></h1>

<p>All functions for conditions in ITSMChangeManagement.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PUBLIC_INTERFACE"
><a name='//apple_ref/cpp/Class/PUBLIC INTERFACE' class='dashAnchor'></a>PUBLIC INTERFACE</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new()"
><a name='//apple_ref/cpp/Function/new()' class='dashAnchor'></a>new()</a></h2>

<p>create an object</p>

<pre>    use Kernel::System::ObjectManager;
    local $Kernel::OM = Kernel::System::ObjectManager-&#62;new();
    my $ConditionObject = $Kernel::OM-&#62;Get(&#39;Kernel::System::ITSMChange::ITSMCondition&#39;);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ConditionAdd()"
><a name='//apple_ref/cpp/Function/ConditionAdd()' class='dashAnchor'></a>ConditionAdd()</a></h2>

<p>Add a new condition.</p>

<pre>    my $ConditionID = $ConditionObject-&#62;ConditionAdd(
        ChangeID              =&#62; 123,
        Name                  =&#62; &#39;The condition name&#39;,
        ExpressionConjunction =&#62; &#39;any&#39;,                 # (any|all)
        Comment               =&#62; &#39;A comment&#39;,           # (optional)
        ValidID               =&#62; 1,
        UserID                =&#62; 1,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ConditionUpdate()"
><a name='//apple_ref/cpp/Function/ConditionUpdate()' class='dashAnchor'></a>ConditionUpdate()</a></h2>

<p>Update a condition.</p>

<pre>    my $Success = $ConditionObject-&#62;ConditionUpdate(
        ConditionID           =&#62; 1234,
        Name                  =&#62; &#39;The condition name&#39;,  # (optional)
        ExpressionConjunction =&#62; &#39;any&#39;,                 # (optional) (any|all)
        Comment               =&#62; &#39;A comment&#39;,           # (optional)
        ValidID               =&#62; 1,                     # (optional)
        UserID                =&#62; 1,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ConditionLookup()"
><a name='//apple_ref/cpp/Function/ConditionLookup()' class='dashAnchor'></a>ConditionLookup()</a></h2>

<p>Return the condition id when the condition name is passed. Return the condition name when the condition id is passed. When no condition id or condition name is found, then the undefined value is returned. The ChangeID is always required as condition names are only unique within the same change.</p>

<pre>    my $ConditionID = $ConditionObject-&#62;ConditionLookup(
        Name     =&#62; &#39;ABC&#39;,
        ChangeID =&#62; 2,
    );

    my $Name = $ConditionObject-&#62;ConditionLookup(
        ConditionID =&#62; 42,
        ChangeID    =&#62; 2,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ConditionGet()"
><a name='//apple_ref/cpp/Function/ConditionGet()' class='dashAnchor'></a>ConditionGet()</a></h2>

<p>Returns a hash reference of the condition data for a given ConditionID.</p>

<pre>    my $ConditionData = $ConditionObject-&#62;ConditionGet(
        ConditionID =&#62; 123,
        UserID      =&#62; 1,
    );</pre>

<p>The returned hash reference contains following elements:</p>

<pre>    $ConditionData{ConditionID}
    $ConditionData{ChangeID}
    $ConditionData{Name}
    $ConditionData{ExpressionConjunction}
    $ConditionData{Comment}
    $ConditionData{ValidID}
    $ConditionData{CreateTime}
    $ConditionData{CreateBy}
    $ConditionData{ChangeTime}
    $ConditionData{ChangeBy}</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ConditionList()"
><a name='//apple_ref/cpp/Function/ConditionList()' class='dashAnchor'></a>ConditionList()</a></h2>

<p>return a list of all condition ids of a given change id as array reference. The ids are sorted by the name of the condition.</p>

<pre>    my $ConditionIDsRef = $ConditionObject-&#62;ConditionList(
        ChangeID =&#62; 5,
        Valid    =&#62; 0,   # (optional) default 1 (0|1)
        UserID   =&#62; 1,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ConditionDelete()"
><a name='//apple_ref/cpp/Function/ConditionDelete()' class='dashAnchor'></a>ConditionDelete()</a></h2>

<p>Delete a condition.</p>

<pre>    my $Success = $ConditionObject-&#62;ConditionDelete(
        ConditionID =&#62; 123,
        UserID      =&#62; 1,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ConditionDeleteAll()"
><a name='//apple_ref/cpp/Function/ConditionDeleteAll()' class='dashAnchor'></a>ConditionDeleteAll()</a></h2>

<p>Delete all conditions for a given ChangeID. All related expressions and actions will be deleted first.</p>

<pre>    my $Success = $ConditionObject-&#62;ConditionDeleteAll(
        ChangeID =&#62; 123,
        UserID   =&#62; 1,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ConditionMatchExecuteAll()"
><a name='//apple_ref/cpp/Function/ConditionMatchExecuteAll()' class='dashAnchor'></a>ConditionMatchExecuteAll()</a></h2>

<p>This functions finds the valid conditions for a given ChangeID. The found conditions are handled by executing the associated actions when a condition matches. The conditions are handled in the order defined by their names.</p>

<p>Internally, the method ConditionMatchExecute() is called for each of the found conditions. The optional parameter &#39;AttributesChanged&#39; is passed on to ConditionMatchExecute().</p>

<pre>    my $Success = $ConditionObject-&#62;ConditionMatchExecuteAll(
        ChangeID          =&#62; 123,
        AttributesChanged =&#62; { ITSMChange =&#62; [ ChangeTitle, ChangeDescription] },  # (optional)
        Event             =&#62; &#39;ChangeUpdate&#39;,                                       # (optional)
        UserID            =&#62; 1,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ConditionMatchExecute()"
><a name='//apple_ref/cpp/Function/ConditionMatchExecute()' class='dashAnchor'></a>ConditionMatchExecute()</a></h2>

<p>This function matches the given condition. When it matches the associated actions are executed.</p>

<p>The optional parameter &#39;AttributesChanged&#39; defines a list of attributes that were changed during e.g. a ChangeUpdate-Event. When &#39;AttributesChanged&#39; is passed, it is used to shortcut the expression evaluation. Only the changed attributes must be checked. When the expression conjunction is &#39;any&#39; and more than a single expression is set up, then, for obvious reasons, the shortcut is not used.</p>

<pre>    my $Success = $ConditionObject-&#62;ConditionMatchExecute(
        ConditionID       =&#62; 123,
        AttributesChanged =&#62; { ITSMChange =&#62; [ ChangeTitle, ChangeDescription] },  # (optional)
        Event             =&#62; &#39;ChangeUpdate&#39;,                                       # (optional)
        UserID            =&#62; 1,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ConditionMatchStateLock()"
><a name='//apple_ref/cpp/Function/ConditionMatchStateLock()' class='dashAnchor'></a>ConditionMatchStateLock()</a></h2>

<pre>    my $Success = $ConditionObject-&#62;ConditionMatchStateLock(
        ObjectName =&#62; &#39;ITSMChange&#39;,
        Selector   =&#62; 234,
        StateID    =&#62; 123,
        UserID     =&#62; 1,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ConditionCompareValueFieldType()"
><a name='//apple_ref/cpp/Function/ConditionCompareValueFieldType()' class='dashAnchor'></a>ConditionCompareValueFieldType()</a></h2>

<p>Returns the type of the compare value field as string, based on the given object id and attribute id.</p>

<pre>    my $FieldType = $ConditionObject-&#62;ConditionCompareValueFieldType(
        ObjectID    =&#62; 1234,
        AttributeID =&#62; 5,
        UserID      =&#62; 1,
    );</pre>

<p>Returns &#39;Text&#39; or &#39;Selection&#39; or &#39;Date&#39;.</p>

<p><code>TODO</code>: Add &#39;Autocomplete&#39; type for ChangeBuilder, ChangeManager, WorkOrderAgent, etc...</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ConditionListByObjectType()"
><a name='//apple_ref/cpp/Function/ConditionListByObjectType()' class='dashAnchor'></a>ConditionListByObjectType()</a></h2>

<p>Return a list of all conditions ids of a given change id as array reference. Only the ids of a condition are returned where object type and identifier are matching.</p>

<pre>    my $ConditionIDsRef = $ConditionObject-&#62;ConditionListByObjectType(
        ObjectType =&#62; &#39;ITSMWorkOrder&#39;
        Selector   =&#62; 1234,
        ChangeID   =&#62; 5,
        UserID     =&#62; 1,
    );</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PRIVATE_INTERFACE"
><a name='//apple_ref/cpp/Class/PRIVATE INTERFACE' class='dashAnchor'></a>PRIVATE INTERFACE</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="_ConditionMatch()"
><a name='//apple_ref/cpp/Function/_ConditionMatch()' class='dashAnchor'></a>_ConditionMatch()</a></h2>

<p>This function matches the given condition and executes &#39;no&#39; actions. The optional parameter &#39;AttributesChanged&#39; defines a list of attributes that were changed during e.g. a ChangeUpdate-Event. If a condition matches an expression, the attribute of the expression must be listed in &#39;AttributesChanged&#39;.</p>

<pre>    my $Success = $ConditionObject-&#62;_ConditionMatch(
        ConditionID       =&#62; 123,
        AttributesChanged =&#62; { ITSMChange =&#62; [ ChangeTitle, ChangeDescription] },  # (optional)
        UserID            =&#62; 1,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="_ConditionListByObject()"
><a name='//apple_ref/cpp/Function/_ConditionListByObject()' class='dashAnchor'></a>_ConditionListByObject()</a></h2>

<p>return a list of all conditions ids of a given object.</p>

<pre>    my $ConditionIDsRef = $ConditionObject-&#62;_ConditionListByObject(
        ObjectName =&#62; &#39;ITSMChange&#39;
        Selector   =&#62; 123,
        UserID     =&#62; 1,
    );</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="TERMS_AND_CONDITIONS"
><a name='//apple_ref/cpp/Class/TERMS AND CONDITIONS' class='dashAnchor'></a>TERMS AND CONDITIONS</a></h1>

<p>This software is part of the OTRS project (<a href="https://otrs.org/" class="podlinkurl"
>https://otrs.org/</a>).</p>

<p>This software comes with ABSOLUTELY NO WARRANTY. For details, see the enclosed file COPYING for license information (GPL). If you did not receive this file, see <a href="https://www.gnu.org/licenses/gpl-3.0.txt" class="podlinkurl"
>https://www.gnu.org/licenses/gpl-3.0.txt</a>.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
