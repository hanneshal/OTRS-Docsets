<html><head><title>Kernel::System::Ticket::TicketACL</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.28,
  using Pod::Simple::PullParser v3.28,
  under Perl v5.018002 at Sat Oct 10 15:08:56 2015 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#SYNOPSIS'>SYNOPSIS</a>
  <li class='indexItem indexItem1'><a href='#TERMS_AND_CONDITIONS'>TERMS AND CONDITIONS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
>NAME</a></h1>

<p>Kernel::System::Ticket::TicketACL - ticket ACL lib</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="SYNOPSIS"
>SYNOPSIS</a></h1>

<p>All ticket ACL functions.</p>

<dl>
<dt><a name="TicketAcl()"
>TicketAcl()</a></dt>

<dd>
<p>Restricts the Data parameter sent to a subset of it,
depending on a group of user defied rules called ACLs.
The reduced subset can be access from TicketACLData() if ReturnType parameter is set to: Ticket,
Process or ActivityDialog,
or in TicketACLActionData(),
if ReturnType Action is used.</p>

<p>Each ACL can contain different restrictions for different objects the ReturnType parameter defines which object is considered for this restrictions,
in the case of the Ticket object a second parameter called ReturnSubtype is needed,
to specify the ticket attribute to be restricted,
like: Queue,
State,
Owner,
etc.
While for the rest of the objects a &#34;-&#34; value must be set.
The ReturnType and ReturnSubType must be set according to the Data parameter sent.</p>

<p>The rest of the attributes define the matching options for the ACL rules.</p>

<p>Example to restrict ticket actions:</p>

<pre>    my $Success = $TicketObject-&#62;TicketAcl(
        Data =&#62; {                            # Values to restrict
            1 =&#62; AgentTicketZoom,
            # ...
        },

        Action        =&#62; &#39;AgentTicketZoom&#39;,           # Optional
        TicketID      =&#62; 123,                         # Optional
        DynamicField  =&#62; {                            # Optional
            DynamicField_NameX =&#62; 123,
            DynamicField_NameZ =&#62; &#39;some value&#39;,
        },

        QueueID          =&#62; 123,                      # Optional
        Queue            =&#62; &#39;some queue name&#39;,        # Optional

        ServiceID        =&#62; 123,                      # Optional
        Service          =&#62; &#39;some service name&#39;,      # Optional

        TypeID           =&#62; 123,
        Type             =&#62; &#39;some ticket type name&#39;,  # Optional

        PriorityID       =&#62; 123,                      # Optional
        NewPriorityID    =&#62; 123,                      # Optional, PriorityID or NewPriorityID can be
                                                      #   used and they both refers to PriorityID
        Priority         =&#62; &#39;some priority name&#39;,     # Optional

        SLAID            =&#62; 123,
        SLA              =&#62; &#39;some SLA name&#39;,          # Optional

        StateID          =&#62; 123,                      # Optional
        NextStateID      =&#62; 123,                      # Optional, StateID or NextStateID can be
                                                      #   used and they both refers to StateID
        State            =&#62; &#39;some ticket state name&#39;, # Optional

        OwnerID          =&#62; 123,                      # Optional
        NewOwnerID       =&#62; 123,                      # Optional, OwnerID or NewOwnerID can be
                                                      #   used and they both refers to OwnerID
        Owner            =&#62; &#39;some user login&#39;         # Optional

        ResponsibleID    =&#62; 123,                      # Optional
        NewResponsibleID =&#62; 123,                      # Optional, ResponsibleID or NewResposibleID
                                                      #   can be used and they both refers to
                                                      #     ResponsibleID
        Responsible      =&#62; &#39;some user login&#39;         # Optional

        ReturnType     =&#62; &#39;Action&#39;,                   # To match Possible, PossibleAdd or
                                                      #   PossibleNot key in ACL
        ReturnSubType  =&#62; &#39;-&#39;,                        # To match Possible, PossibleAdd or
                                                      #   PossibleNot sub-key in ACL

        UserID         =&#62; 123,                        # UserID =&#62; 1 is not affected by this function
        CustomerUserID =&#62; &#39;customer login&#39;,           # UserID or CustomerUserID are mandatory

        # Process Management Parameters
        ProcessEntityID        =&#62; 123,                # Optional
        ActivityEntityID       =&#62; 123,                # Optional
        ActivityDialogEntityID =&#62; 123,                # Optional
    );</pre>

<p>or to restrict ticket states:</p>

<pre>    $Success = $TicketObject-&#62;TicketAcl(
        Data =&#62; {
            1 =&#62; &#39;new&#39;,
            2 =&#62; &#39;open&#39;,
            # ...
        },
        ReturnType    =&#62; &#39;Ticket&#39;,
        ReturnSubType =&#62; &#39;State&#39;,
        UserID        =&#62; 123,
    );</pre>

<p>returns: $Success = 1, # if an ACL matches, or false otherwise.</p>

<p>If ACL modules are configured in the <code>Ticket::Acl::Module</code> config key, they are invoked during the call to <code>TicketAcl</code>. The configuration of a module looks like this:</p>

<pre>     $ConfigObject-&#62;{&#39;Ticket::Acl::Module&#39;}-&#62;{&#39;TheName&#39;} = {
         Module =&#62; &#39;Kernel::System::Ticket::Acl::TheAclModule&#39;,
         Checks =&#62; [&#39;Owner&#39;, &#39;Queue&#39;, &#39;SLA&#39;, &#39;Ticket&#39;],
         ReturnType =&#62; &#39;Ticket&#39;,
         ReturnSubType =&#62; [&#39;State&#39;, &#39;Service&#39;],
     };</pre>

<p>Each time the <code>ReturnType</code> and one of the <code>ReturnSubType</code> entries is identical to the same arguments passed to <code>TicketAcl</code>, the module of the name in <code>Module</code> is loaded, the <code>new</code> method is called on it, and then the <code>Run</code> method is called.</p>

<p>The <code>Checks</code> array reference in the configuration controls what arguments are passed. to the <code>Run</code> method. Valid keys are <code>CustomerUser</code>, <code>DynamicField</code>, <code>Frontend</code>, <code>Owner</code>, <code>Priority</code>, <code>Process</code>, <code>Queue</code>, <code>Responsible</code>, <code>Service</code>, <code>SLA</code>, <code>State</code>, <code>Ticket</code> and <code>Type</code>. If any of those are present, the <code>Checks</code> argument passed to <code>Run</code> contains an entry with the same name, and as a value the associated data.</p>

<p>The <code>Run</code> method can add entries to the <code>Acl</code> param hash, which are then evaluated along with all other ACL. It should only add entries whose conditionals can be checked with the data specified in the <code>Checks</code> configuration entry.</p>

<p>The return value of the <code>Run</code> method is ignored.</p>

<dt><a name="TicketAclData()"
>TicketAclData()</a></dt>

<dd>
<p>return the current ACL data hash after TicketAcl()</p>

<pre>    my %Acl = $TicketObject-&#62;TicketAclData();</pre>

<dt><a name="TicketAclActionData()"
>TicketAclActionData()</a></dt>

<dd>
<p>return the current ACL action data hash after TicketAcl()</p>

<pre>    my %AclAction = $TicketObject-&#62;TicketAclActionData();</pre>
</dd>
</dl>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="TERMS_AND_CONDITIONS"
>TERMS AND CONDITIONS</a></h1>

<p>This software is part of the OTRS project (<a href="http://otrs.org/" class="podlinkurl"
>http://otrs.org/</a>).</p>

<p>This software comes with ABSOLUTELY NO WARRANTY. For details, see the enclosed file COPYING for license information (AGPL). If you did not receive this file, see <a href="http://www.gnu.org/licenses/agpl.txt" class="podlinkurl"
>http://www.gnu.org/licenses/agpl.txt</a>.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
