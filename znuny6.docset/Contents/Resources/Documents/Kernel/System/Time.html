<html><head><title>Kernel::System::Time</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.28,
  using Pod::Simple::PullParser v3.28,
  under Perl v5.018004 at Tue Feb 16 20:51:24 2021 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#DESCRIPTION'>DESCRIPTION</a>
  <li class='indexItem indexItem1'><a href='#PUBLIC_INTERFACE'>PUBLIC INTERFACE</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#new()'>new()</a>
    <li class='indexItem indexItem2'><a href='#SystemTime()'>SystemTime()</a>
    <li class='indexItem indexItem2'><a href='#SystemTime2TimeStamp()'>SystemTime2TimeStamp()</a>
    <li class='indexItem indexItem2'><a href='#CurrentTimestamp()'>CurrentTimestamp()</a>
    <li class='indexItem indexItem2'><a href='#SystemTime2Date()'>SystemTime2Date()</a>
    <li class='indexItem indexItem2'><a href='#TimeStamp2SystemTime()'>TimeStamp2SystemTime()</a>
    <li class='indexItem indexItem2'><a href='#Date2SystemTime()'>Date2SystemTime()</a>
    <li class='indexItem indexItem2'><a href='#ServerLocalTimeOffsetSeconds()'>ServerLocalTimeOffsetSeconds()</a>
    <li class='indexItem indexItem2'><a href='#MailTimeStamp()'>MailTimeStamp()</a>
    <li class='indexItem indexItem2'><a href='#WorkingTime()'>WorkingTime()</a>
    <li class='indexItem indexItem2'><a href='#DestinationTime()'>DestinationTime()</a>
    <li class='indexItem indexItem2'><a href='#VacationCheck()'>VacationCheck()</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#TERMS_AND_CONDITIONS'>TERMS AND CONDITIONS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
><a name='//apple_ref/cpp/Class/NAME' class='dashAnchor'></a>NAME</a></h1>

<p>Kernel::System::Time - time functions.
DEPRECATED,
for new code use Kernel::System::DateTime instead.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="DESCRIPTION"
><a name='//apple_ref/cpp/Class/DESCRIPTION' class='dashAnchor'></a>DESCRIPTION</a></h1>

<p>This module is managing time functions.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PUBLIC_INTERFACE"
><a name='//apple_ref/cpp/Class/PUBLIC INTERFACE' class='dashAnchor'></a>PUBLIC INTERFACE</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="new()"
><a name='//apple_ref/cpp/Function/new()' class='dashAnchor'></a>new()</a></h2>

<p>create a time object.
Do not use it directly,
instead use:</p>

<pre>    my $TimeObject = $Kernel::OM-&#62;Get(&#39;Kernel::System::DateTime&#39;);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="SystemTime()"
><a name='//apple_ref/cpp/Function/SystemTime()' class='dashAnchor'></a>SystemTime()</a></h2>

<p>returns the number of non-leap seconds since what ever time the system considers to be the epoch (that&#39;s 00:00:00, January 1, 1904 for Mac OS, and 00:00:00 UTC, January 1, 1970 for most other systems).</p>

<pre>    my $SystemTime = $TimeObject-&#62;SystemTime();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="SystemTime2TimeStamp()"
><a name='//apple_ref/cpp/Function/SystemTime2TimeStamp()' class='dashAnchor'></a>SystemTime2TimeStamp()</a></h2>

<p>returns a time stamp for a given system time in <code>yyyy-mm-dd 23:59:59</code> format.</p>

<pre>    my $TimeStamp = $TimeObject-&#62;SystemTime2TimeStamp(
        SystemTime =&#62; $SystemTime,
    );</pre>

<p>If you need the short format &#34;23:59:59&#34; for dates that are &#34;today&#34;, pass the Type parameter like this:</p>

<pre>    my $TimeStamp = $TimeObject-&#62;SystemTime2TimeStamp(
        SystemTime =&#62; $SystemTime,
        Type       =&#62; &#39;Short&#39;,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="CurrentTimestamp()"
><a name='//apple_ref/cpp/Function/CurrentTimestamp()' class='dashAnchor'></a>CurrentTimestamp()</a></h2>

<p>returns a time stamp of the local system time (see <a href="../../SystemTime().html" class="podlinkpod"
>SystemTime()</a>) in <code>yyyy-mm-dd 23:59:59</code> format.</p>

<pre>    my $TimeStamp = $TimeObject-&#62;CurrentTimestamp();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="SystemTime2Date()"
><a name='//apple_ref/cpp/Function/SystemTime2Date()' class='dashAnchor'></a>SystemTime2Date()</a></h2>

<p>converts a system time to a structured date array.</p>

<pre>    my ($Sec, $Min, $Hour, $Day, $Month, $Year, $WeekDay) = $TimeObject-&#62;SystemTime2Date(
        SystemTime =&#62; $TimeObject-&#62;SystemTime(),
    );</pre>

<p>$WeekDay is the day of the week, with 0 indicating Sunday and 3 indicating Wednesday.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="TimeStamp2SystemTime()"
><a name='//apple_ref/cpp/Function/TimeStamp2SystemTime()' class='dashAnchor'></a>TimeStamp2SystemTime()</a></h2>

<p>converts a given time stamp to local system time.</p>

<pre>    my $SystemTime = $TimeObject-&#62;TimeStamp2SystemTime(
        String =&#62; &#39;2004-08-14 22:45:00&#39;,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="Date2SystemTime()"
><a name='//apple_ref/cpp/Function/Date2SystemTime()' class='dashAnchor'></a>Date2SystemTime()</a></h2>

<p>converts a structured date array to system time of OTRS.</p>

<pre>    my $SystemTime = $TimeObject-&#62;Date2SystemTime(
        Year   =&#62; 2004,
        Month  =&#62; 8,
        Day    =&#62; 14,
        Hour   =&#62; 22,
        Minute =&#62; 45,
        Second =&#62; 0,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ServerLocalTimeOffsetSeconds()"
><a name='//apple_ref/cpp/Function/ServerLocalTimeOffsetSeconds()' class='dashAnchor'></a>ServerLocalTimeOffsetSeconds()</a></h2>

<p>All framework code that calls this method only uses it to check if the server runs in UTC and therefore user time zones are allowed. It&#39;s not needed any more in the future and is only in here to don&#39;t break code that has not been ported yet. It returns 0 to tell its callers that the server runs in UTC and so user time zones are allowed/active.</p>

<p>( originally returned the computed difference in seconds between UTC time and local time. )</p>

<pre>    my $ServerLocalTimeOffsetSeconds = $TimeObject-&#62;ServerLocalTimeOffsetSeconds(
        SystemTime =&#62; $SystemTime,  # optional, otherwise call time()
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="MailTimeStamp()"
><a name='//apple_ref/cpp/Function/MailTimeStamp()' class='dashAnchor'></a>MailTimeStamp()</a></h2>

<p>returns the current time stamp in RFC 2822 format to be used in email headers: &#34;Wed, 22 Sep 2014 16:30:57 +0200&#34;.</p>

<pre>    my $MailTimeStamp = $TimeObject-&#62;MailTimeStamp();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="WorkingTime()"
><a name='//apple_ref/cpp/Function/WorkingTime()' class='dashAnchor'></a>WorkingTime()</a></h2>

<p>get the working time in seconds between these local system times.</p>

<pre>    my $WorkingTime = $TimeObject-&#62;WorkingTime(
        StartTime =&#62; $Created,
        StopTime  =&#62; $TimeObject-&#62;SystemTime(),
    );

    my $WorkingTime = $TimeObject-&#62;WorkingTime(
        StartTime =&#62; $Created,
        StopTime  =&#62; $TimeObject-&#62;SystemTime(),
        Calendar  =&#62; 3, # &#39;&#39; is default
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="DestinationTime()"
><a name='//apple_ref/cpp/Function/DestinationTime()' class='dashAnchor'></a>DestinationTime()</a></h2>

<p>get the destination time based on the current calendar working time (fallback: default system working time) configuration.</p>

<p>Returns a system time (integer time stamp).</p>

<p>The algorithm roughly works as follows: - Check if the start time is actually in the configured working time. - If not, set it to the next working time second. Example: start time is on a weekend, start time would be set to 8:00 on the following Monday. - Then the diff time (in seconds) is added to the start time incrementally, only considering the configured working times. So adding 24 hours could actually span multiple days because they would be spread over the configured working hours. If we have 8-20, 24 hours would be spread over 2 days (13/11 hours).</p>

<p>NOTE: Currently, the implementation stops silently after 600 iterations, making it impossible to specify longer escalation times, for example.</p>

<pre>    my $DestinationTime = $TimeObject-&#62;DestinationTime(
        StartTime =&#62; $Created,
        Time      =&#62; 60*60*24*2,
    );

    my $DestinationTime = $TimeObject-&#62;DestinationTime(
        StartTime =&#62; $Created,
        Time      =&#62; 60*60*24*2,
        Calendar  =&#62; 3, # &#39;&#39; is default
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="VacationCheck()"
><a name='//apple_ref/cpp/Function/VacationCheck()' class='dashAnchor'></a>VacationCheck()</a></h2>

<p>check if the selected day is a vacation (it does not matter if you insert 01 or 1 for month or day in the function or in the SysConfig)</p>

<p>returns (true) vacation day if exists, returns false if date is no vacation day</p>

<pre>    $TimeObject-&#62;VacationCheck(
        Year     =&#62; 2005,
        Month    =&#62; 7 || &#39;07&#39;,
        Day      =&#62; 13,
    );

    $TimeObject-&#62;VacationCheck(
        Year     =&#62; 2005,
        Month    =&#62; 7 || &#39;07&#39;,
        Day      =&#62; 13,
        Calendar =&#62; 3, # &#39;&#39; is default; 0 is handled like &#39;&#39;
    );</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="TERMS_AND_CONDITIONS"
><a name='//apple_ref/cpp/Class/TERMS AND CONDITIONS' class='dashAnchor'></a>TERMS AND CONDITIONS</a></h1>

<p>This software is part of the OTRS project (<a href="https://otrs.org/" class="podlinkurl"
>https://otrs.org/</a>).</p>

<p>This software comes with ABSOLUTELY NO WARRANTY. For details, see the enclosed file COPYING for license information (GPL). If you did not receive this file, see <a href="https://www.gnu.org/licenses/gpl-3.0.txt" class="podlinkurl"
>https://www.gnu.org/licenses/gpl-3.0.txt</a>.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
