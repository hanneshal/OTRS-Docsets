<html><head><title>scripts::DBUpdateTo6::Base</title>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" >
<link rel="stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="blkmagw" type="text/css" href="../../_blkmagw.css" media="all" >
<link rel="alternate stylesheet" title="blkcynw" type="text/css" href="../../_blkcynw.css" media="all" >
<link rel="alternate stylesheet" title="whtprpk" type="text/css" href="../../_whtprpk.css" media="all" >
<link rel="alternate stylesheet" title="whtnavk" type="text/css" href="../../_whtnavk.css" media="all" >
<link rel="alternate stylesheet" title="grygrnk" type="text/css" href="../../_grygrnk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="blkgrng" type="text/css" href="../../_blkgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >
<link rel="alternate stylesheet" title="blkbluw" type="text/css" href="../../_blkbluw.css" media="all" >
<link rel="alternate stylesheet" title="whtpurk" type="text/css" href="../../_whtpurk.css" media="all" >
<link rel="alternate stylesheet" title="whtgrng" type="text/css" href="../../_whtgrng.css" media="all" >
<link rel="alternate stylesheet" title="grygrnw" type="text/css" href="../../_grygrnw.css" media="all" >

<script type="text/javascript" src="../../_podly.js"></script>

</head>
<body class='pod'>
<!--
  generated by Pod::Simple::HTML v3.28,
  using Pod::Simple::PullParser v3.28,
  under Perl v5.018004 at Tue Feb 16 20:51:24 2021 GMT.

 If you want to change this HTML document, you probably shouldn't do that
   by changing it directly.  Instead, see about changing the calling options
   to Pod::Simple::HTML, and/or subclassing Pod::Simple::HTML,
   then reconverting this document from the Pod source.
   When in doubt, email the author of Pod::Simple::HTML for advice.
   See 'perldoc Pod::Simple::HTML' for more info.

-->

<!-- start doc -->
<p class="backlinktop"><b><a name="___top" href="../../index.html" accesskey="1" title="All Documents">&lt;&lt;</a></b></p>

<div class='indexgroup'>
<ul   class='indexList indexList1'>
  <li class='indexItem indexItem1'><a href='#NAME'>NAME</a>
  <li class='indexItem indexItem1'><a href='#PUBLIC_INTERFACE'>PUBLIC INTERFACE</a>
  <ul   class='indexList indexList2'>
    <li class='indexItem indexItem2'><a href='#RebuildConfig()'>RebuildConfig()</a>
    <li class='indexItem indexItem2'><a href='#CacheCleanup()'>CacheCleanup()</a>
    <li class='indexItem indexItem2'><a href='#ExecuteXMLDBArray()'>ExecuteXMLDBArray()</a>
    <li class='indexItem indexItem2'><a href='#ExecuteXMLDBString()'>ExecuteXMLDBString()</a>
    <li class='indexItem indexItem2'><a href='#TableExists()'>TableExists()</a>
    <li class='indexItem indexItem2'><a href='#ColumnExists()'>ColumnExists()</a>
    <li class='indexItem indexItem2'><a href='#IndexExists()'>IndexExists()</a>
    <li class='indexItem indexItem2'><a href='#GetTaskConfig()'>GetTaskConfig()</a>
    <li class='indexItem indexItem2'><a href='#SettingUpdate()'>SettingUpdate()</a>
  </ul>
  <li class='indexItem indexItem1'><a href='#TERMS_AND_CONDITIONS'>TERMS AND CONDITIONS</a>
</ul>
</div>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="NAME"
><a name='//apple_ref/cpp/Class/NAME' class='dashAnchor'></a>NAME</a></h1>

<p>scripts::DBUpdateTo6::Base - Base class for migrations.</p>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="PUBLIC_INTERFACE"
><a name='//apple_ref/cpp/Class/PUBLIC INTERFACE' class='dashAnchor'></a>PUBLIC INTERFACE</a></h1>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="RebuildConfig()"
><a name='//apple_ref/cpp/Function/RebuildConfig()' class='dashAnchor'></a>RebuildConfig()</a></h2>

<p>Refreshes the configuration to make sure that a ZZZAAuto.pm is present after the upgrade.</p>

<pre>    $DBUpdateTo6Object-&#62;RebuildConfig(
        UnitTestMode      =&#62; 1,         # (optional) Prevent discarding all objects at the end.
        CleanUpIfPossible =&#62; 1,         # (optional) Removes leftover settings that are not contained in XML files,
                                        #   but only if all XML files for installed packages are present.
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="CacheCleanup()"
><a name='//apple_ref/cpp/Function/CacheCleanup()' class='dashAnchor'></a>CacheCleanup()</a></h2>

<p>Clean up the cache.</p>

<pre>    $DBUpdateTo6Object-&#62;CacheCleanup();</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ExecuteXMLDBArray()"
><a name='//apple_ref/cpp/Function/ExecuteXMLDBArray()' class='dashAnchor'></a>ExecuteXMLDBArray()</a></h2>

<p>Parse and execute an XML array.</p>

<pre>    $DBUpdateTo6Object-&#62;ExecuteXMLDBArray(
        XMLArray          =&#62; \@XMLArray,
        Old2NewTableNames =&#62; {                                        # optional
            &#39;article&#39;            =&#62; &#39;article_data_mime&#39;,
            &#39;article_plain&#39;      =&#62; &#39;article_data_mime_plain&#39;,
            &#39;article_attachment&#39; =&#62; &#39;article_data_mime_attachment&#39;,
        },
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ExecuteXMLDBString()"
><a name='//apple_ref/cpp/Function/ExecuteXMLDBString()' class='dashAnchor'></a>ExecuteXMLDBString()</a></h2>

<p>Parse and execute an XML string.</p>

<pre>    $DBUpdateTo6Object-&#62;ExecuteXMLDBString(
        XMLString =&#62; &#39;
            &#60;TableAlter Name=&#34;gi_webservice_config&#34;&#62;
                &#60;ColumnDrop Name=&#34;config_md5&#34;/&#62;
            &#60;/TableAlter&#62;
        &#39;,
    );</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="TableExists()"
><a name='//apple_ref/cpp/Function/TableExists()' class='dashAnchor'></a>TableExists()</a></h2>

<p>Checks if the given table exists in the database.</p>

<pre>    my $Result = $DBUpdateTo6Object-&#62;TableExists(
        Table =&#62; &#39;ticket&#39;,
    );</pre>

<p>Returns true if the table exists, otherwise false.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="ColumnExists()"
><a name='//apple_ref/cpp/Function/ColumnExists()' class='dashAnchor'></a>ColumnExists()</a></h2>

<p>Checks if the given column exists in the given table.</p>

<pre>    my $Result = $DBUpdateTo6Object-&#62;ColumnExists(
        Table  =&#62; &#39;ticket&#39;,
        Column =&#62;  &#39;id&#39;,
    );</pre>

<p>Returns true if the column exists, otherwise false.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="IndexExists()"
><a name='//apple_ref/cpp/Function/IndexExists()' class='dashAnchor'></a>IndexExists()</a></h2>

<p>Checks if the given index exists in the given table.</p>

<pre>    my $Result = $DBUpdateTo6Object-&#62;IndexExists(
        Table =&#62; &#39;ticket&#39;,
        Index =&#62;  &#39;id&#39;,
    );</pre>

<p>Returns true if the index exists, otherwise false.</p>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="GetTaskConfig()"
><a name='//apple_ref/cpp/Function/GetTaskConfig()' class='dashAnchor'></a>GetTaskConfig()</a></h2>

<p>Clean up the cache.</p>

<pre>    $DBUpdateTo6Object-&#62;GetTaskConfig( Module =&#62; &#34;TaskModuleName&#34;);</pre>

<h2><a class='u' href='#___top' title='click to go to top of document'
name="SettingUpdate()"
><a name='//apple_ref/cpp/Function/SettingUpdate()' class='dashAnchor'></a>SettingUpdate()</a></h2>

<p>Update an existing SysConfig Setting in a migration context. It will skip updating both read-only and already modified settings by default.</p>

<pre>    $DBUpdateTo6Object-&#62;SettingUpdate(
        Name                   =&#62; &#39;Setting::Name&#39;,           # (required) setting name
        IsValid                =&#62; 1,                         # (optional) 1 or 0, modified 0
        EffectiveValue         =&#62; $SettingEffectiveValue,    # (optional)
        UserModificationActive =&#62; 0,                         # (optional) 1 or 0, modified 0
        TargetUserID           =&#62; 2,                         # (optional) ID of the user for which the modified setting is meant,
                                                             #   leave it undef for global changes.
        NoValidation           =&#62; 1,                         # (optional) no value type validation.
        ContinueOnModified     =&#62; 0,                         # (optional) Do not skip already modified settings.
                                                             #   1 or 0, default 0
        Verbose                =&#62; 0,                         # (optional) 1 or 0, default 0
    );</pre>

<h1><a class='u' href='#___top' title='click to go to top of document'
name="TERMS_AND_CONDITIONS"
><a name='//apple_ref/cpp/Class/TERMS AND CONDITIONS' class='dashAnchor'></a>TERMS AND CONDITIONS</a></h1>

<p>This software is part of the OTRS project (<a href="https://otrs.org/" class="podlinkurl"
>https://otrs.org/</a>).</p>

<p>This software comes with ABSOLUTELY NO WARRANTY. For details, see the enclosed file COPYING for license information (GPL). If you did not receive this file, see <a href="https://www.gnu.org/licenses/gpl-3.0.txt" class="podlinkurl"
>https://www.gnu.org/licenses/gpl-3.0.txt</a>.</p>
<p class="backlinkbottom"><b><a name="___bottom" href="../../index.html" title="All Documents">&lt;&lt;</a></b></p>

<!-- end doc -->

</body></html>
